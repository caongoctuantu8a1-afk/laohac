<!DOCTYPE html>
<html lang="vi">
<head>
<meta charset="UTF-8">
<title>Gi·∫£i c·ª©u L√£o H·∫°c</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{margin:0;font-family:Arial;background:#111;color:white}
#game{position:relative;width:100vw;height:100vh;overflow:hidden;
 background:url("laohac1.jpg") center/cover;}
#laohac{position:absolute;bottom:80px;left:40px;width:100px;transition:.2s;}
#ground{position:absolute;bottom:0;width:100%;height:80px;background:#3b2a1a}
#hpWrap{position:absolute;top:10px;left:10px;width:200px;height:20px;border:2px solid #fff}
#hpBar{height:100%;background:lime;width:100%}
#questionBox{
 position:absolute;bottom:100px;left:50%;transform:translateX(-50%);
 background:rgba(0,0,0,.8);padding:15px;border-radius:10px;width:90%;
}
textarea{width:100%;height:70px}
button{padding:10px 20px;background:gold;border:none;border-radius:10px;font-size:16px}
#leaderboard{position:absolute;top:10px;right:10px;background:rgba(0,0,0,.7);padding:10px;border-radius:10px}
</style>
</head>

<body>

<div id="game">
 <div id="hpWrap"><div id="hpBar"></div></div>
 <img id="laohac" src="laohac2.jpg">
 <div id="ground"></div>

 <div id="questionBox">
  <div id="q"></div>
  <textarea id="ans"></textarea>
  <button onclick="submit()">V∆Ø·ª¢T QUA</button>
 </div>

 <div id="leaderboard"><b>üèÜ BXH L·ªõp</b><div id="board"></div></div>
</div>

<audio id="winSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_41f10929c7.mp3"></audio>
<audio id="loseSound" src="https://cdn.pixabay.com/download/audio/2022/03/15/audio_1b8bb6f2c5.mp3"></audio>

<script>
const levels = [
[
 {q:"L√£o H·∫°c l√† nh√¢n v·∫≠t c·ªßa t√°c gi·∫£ n√†o?",keys:["nam cao"]},
 {q:"C·∫≠u V√†ng l√† con v·∫≠t g√¨?",keys:["ch√≥"]},
 {q:"Ho√†n c·∫£nh s·ªëng c·ªßa l√£o H·∫°c?",keys:["ngh√®o","c√¥ ƒë∆°n"]},
],
[
 {q:"V√¨ sao l√£o H·∫°c b√°n C·∫≠u V√†ng?",keys:["ngh√®o","cho con","m·∫£nh v∆∞·ªùn"]},
 {q:"T√¢m tr·∫°ng l√£o H·∫°c sau khi b√°n ch√≥?",keys:["ƒëau","√¢n h·∫≠n","day d·ª©t"]},
 {q:"√ù nghƒ©a c·ªßa C·∫≠u V√†ng?",keys:["k·ªâ v·∫≠t","con trai","ni·ªÅm an ·ªßi"]},
],
[
 {q:"Bi·ªÉu hi·ªán l√≤ng t·ª± tr·ªçng c·ªßa l√£o H·∫°c?",keys:["t·ª± tr·ªçng","kh√¥ng nh·∫≠n","th√† ch·∫øt"]},
 {q:"Vai tr√≤ c·ªßa √¥ng gi√°o?",keys:["nh√¢n ƒë·∫°o","k·ªÉ","ch·ª©ng ki·∫øn"]},
 {q:"Bi k·ªãch c·ªßa l√£o H·∫°c?",keys:["ngh√®o","c√¥ ƒë∆°n","b·∫ø t·∫Øc"]},
],
[
 {q:"Gi√° tr·ªã nh√¢n ƒë·∫°o c·ªßa truy·ªán?",keys:["nh√¢n ƒë·∫°o","c·∫£m th√¥ng","ph·∫©m gi√°"]},
 {q:"V√¨ sao Nam Cao cho l√£o H·∫°c ch·∫øt b·∫±ng b·∫£ ch√≥?",keys:["c·∫≠u v√†ng","d·∫±n v·∫∑t","t·ªë c√°o"]},
 {q:"Quan ni·ªám Nam Cao v·ªÅ con ng∆∞·ªùi?",keys:["nh√¢n ph·∫©m","cao qu√Ω"]},
]
];

let level=0,questionIndex=0,hp=100;

function updateHP(){
 document.getElementById("hpBar").style.width=hp+"%";
}

function run(){
 let l=document.getElementById("laohac");
 l.style.left=(parseInt(l.style.left||40)+100)+"px";
}

function jump(){
 let l=document.getElementById("laohac");
 l.style.bottom="200px";
 setTimeout(()=>l.style.bottom="80px",400);
}

function submit(){
 let a=document.getElementById("ans").value.toLowerCase();
 let k=levels[level][questionIndex].keys;
 let hit=0; k.forEach(x=>{if(a.includes(x))hit++;});

 if(hit>=2){run();}
 else{
  hp-=25;updateHP();jump();
  if(hp<=0) end(false);
 }

 questionIndex++;
 next();
}

function next(){
 if(questionIndex>=levels[level].length){
  level++;questionIndex=0;
  if(level>=levels.length){end(true);return;}
  alert("üéØ Sang c·∫•p ƒë·ªô "+(level+1));
 }
 let q=levels[level][questionIndex];
 document.getElementById("q").innerText="Level "+(level+1)+" ‚Äì C·ª≠a "+(questionIndex+1)+": "+q.q;
 document.getElementById("ans").value="";
}

function end(win){
 if(win){
  document.getElementById("winSound").play();
  let name=prompt("T√™n b·∫°n?");
  let board=JSON.parse(localStorage.getItem("bxh")||"[]");
  board.push({name,score:hp});
  board.sort((a,b)=>b.score-a.score);
  localStorage.setItem("bxh",JSON.stringify(board.slice(0,5)));
  showBoard();
  alert("üéâ B·∫°n ƒë√£ c·ª©u ƒë∆∞·ª£c L√£o H·∫°c!");
 }else{
  document.getElementById("loseSound").play();
  alert("üíÄ L√£o H·∫°c g·ª•c ng√£!");
 }
 location.reload();
}

function showBoard(){
 let board=JSON.parse(localStorage.getItem("bxh")||"[]");
 let html="";
 board.forEach(x=>html+=x.name+" : "+x.score+"<br>");
 document.getElementById("board").innerHTML=html;
}

showBoard(); updateHP(); next();
</script>

</body>
</html>
